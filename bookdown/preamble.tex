% Page
\usepackage[a4paper,margin=1in,bindingoffset=0.5in,footskip=0.25in]{geometry}

% Don't hyphenate
\usepackage[none]{hyphenat}

% CS colors
\usepackage{xcolor}
\definecolor{CSblue}{HTML}{3960A5}
\definecolor{CSbluelight}{HTML}{4878CE}
\definecolor{CSgreen}{HTML}{008000}
\definecolor{capcol}{HTML}{087830}
\definecolor{chap}{HTML}{E03616}
\definecolor{calloutbackground}{HTML}{F2F3F4}
\definecolor{calloutborder}{HTML}{0096C8}

% Font
%% Main serif fonts with math
\usepackage{amsmath}
\usepackage{fontspec}
\defaultfontfeatures{Ligatures=TeX}
\setmainfont{STIXTwoText}[ 
Extension = {.otf}, 
UprightFont = {*-Regular}, 
ItalicFont = {*-Italic}, 
BoldFont = {*-Bold}, 
BoldItalicFont = {*-BoldItalic} 
]
\setmathfont{STIX Two Math}
\setmathfont{STIX Two Math}[range={scr,bfscr}, StylisticSet=1]
\usepackage{bm} 
 
%% Sans serif font
%\usepackage[default,light,bold]{sourceserifpro}
\usepackage[sfdefault]{sourcesanspro}

% Captions and subfigures
\usepackage{caption}
\captionsetup[figure]{width=0.8\linewidth}
\captionsetup[table]{width=0.8\linewidth}
\usepackage[labelfont={color=capcol,bf}]{caption}
\usepackage[font={small,sf}]{caption}
\usepackage{subfig}

\usepackage{array}

% Package to tweak width
\usepackage{varwidth}

% For positioning figures
\usepackage{wrapfig}
\usepackage{float}
\floatplacement{figure}{H}
\renewcommand{\topfraction}{.85}
\renewcommand{\bottomfraction}{.7}
\renewcommand{\textfraction}{.15}
\renewcommand{\floatpagefraction}{.66}
\setcounter{topnumber}{3}
\setcounter{bottomnumber}{3}
\setcounter{totalnumber}{4}

% Titles and chapters
\usepackage{sectsty}
\chaptertitlefont{\Huge\bfseries\sourcesanspro\color{chap}}
\chapternumberfont{\huge\bfseries\sourcesanspro\color{chap}}
\sectionfont{\normalfont\Large\bfseries\sourcesanspro}
\subsectionfont{\normalfont\large\bfseries\sourcesanspro}
\usepackage{titlesec}
\titlespacing\subsection{0pt}{12pt plus 4pt minus 2pt}{12pt plus 4pt minus 2pt}

% Adding a framed box around text
\usepackage[most]{tcolorbox}
\newtcolorbox{callout}[1][]{%
  colback=calloutbackground,
  colframe=calloutborder,
  boxrule=0pt,
  leftrule=2pt,
  sharp corners,
  halign=left,
  parbox=false,
  before upper={\vspace{1em}},
  after upper={\vspace{1em}},
  fontupper=\sourcesanspro\small,
  breakable, enhanced,
  title=#1,
  fonttitle=\sourcesanspro\normalsize,
}

\newenvironment{callouttitle}{}{}


% Dependencies for merging with external cover page
\usepackage{pdfpages}
\let\oldmaketitle\maketitle
\AtBeginDocument{\let\maketitle\relax}
